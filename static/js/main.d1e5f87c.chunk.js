(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{10:function(t,e,a){"use strict";a.r(e);var i=a(1),s=a(2),r=a(3),n=a(5),l=a(4),o=a(6),c=a(0),h=a.n(c),p=a(8),u=a.n(p),m=(a(15),function(t){function e(){return Object(s.a)(this,e),Object(n.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(o.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{id:"spotifyLogin"},h.a.createElement(S,null)),h.a.createElement("div",{id:"playlistBuilder"},h.a.createElement(d,null)))}}]),e}(h.a.Component)),d=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).state={mainArtistTracks:[],mainArtistSimilarArtists:[],currentMainArtist:"",mainArtistData:{},spiderLegShow:!1,spiderLeg:[{left:"55%",top:"6%",leftAnchor:"63%",topAnchor:"8%",artistName:"",artistID:0},{left:"30%",top:"5%",leftAnchor:"38%",topAnchor:"7%",artistName:"",artistID:0},{left:"60%",top:"12%",leftAnchor:"68%",topAnchor:"14%",artistName:"",artistID:0},{left:"70%",top:"30%",leftAnchor:"78%",topAnchor:"32%",artistName:"",artistID:0},{left:"81%",top:"40%",leftAnchor:"89%",topAnchor:"42%",artistName:"",artistID:0},{left:"27%",top:"30%",leftAnchor:"35%",topAnchor:"32%",artistName:"",artistID:0},{left:"40%",top:"20%",leftAnchor:"48%",topAnchor:"22%",artistName:"",artistID:0},{left:"50%",top:"30%",leftAnchor:"58%",topAnchor:"32%",artistName:"",artistID:0},{left:"78%",top:"8%",leftAnchor:"86%",topAnchor:"10%",artistName:"",artistID:0},{left:"29%",top:"60%",leftAnchor:"37%",topAnchor:"62%",artistName:"",artistID:0},{left:"82%",top:"68%",leftAnchor:"90%",topAnchor:"70%",artistName:"",artistID:0},{left:"26%",top:"90%",leftAnchor:"34%",topAnchor:"92%",artistName:"",artistID:0},{left:"80%",top:"76%",leftAnchor:"88%",topAnchor:"78%",artistName:"",artistID:0}],playlistName:"",playlistSongs:[],currentSearchIndex:0,userID:"",playlistID:"",lastCreatedPlaylistName:"",playlistButtonPrompt:"Create Playlist",playlistTrackIDGen:0},a.mainArtistChange=a.mainArtistChange.bind(Object(i.a)(a)),a.mainArtistSubmit=a.mainArtistSubmit.bind(Object(i.a)(a)),a.searchAPI=a.searchAPI.bind(Object(i.a)(a)),a.artistTopTracksAPI=a.artistTopTracksAPI.bind(Object(i.a)(a)),a.artistSimilarArtistsAPI=a.artistSimilarArtistsAPI.bind(Object(i.a)(a)),a.artistGetAllData=a.artistGetAllData.bind(Object(i.a)(a)),a.processArtistData=a.processArtistData.bind(Object(i.a)(a)),a.setNewArtist=a.setNewArtist.bind(Object(i.a)(a)),a.playlistNameChange=a.playlistNameChange.bind(Object(i.a)(a)),a.submitSong=a.submitSong.bind(Object(i.a)(a)),a.tryNextArtist=a.tryNextArtist.bind(Object(i.a)(a)),a.createPlaylist=a.createPlaylist.bind(Object(i.a)(a)),a.addTracksToPlaylist=a.addTracksToPlaylist.bind(Object(i.a)(a)),a.respondToNewPlaylistID=a.respondToNewPlaylistID.bind(Object(i.a)(a)),a.removeTrackFromPlaylist=a.removeTrackFromPlaylist.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){""===this.state.userID&&this.getCurrentUserID()}},{key:"mainArtistChange",value:function(t){this.setState({currentMainArtist:t})}},{key:"mainArtistSubmit",value:function(t){this.setState({spiderLegShow:!0,currentSearchIndex:0}),this.searchAPI(this.state.currentMainArtist)}},{key:"playlistNameChange",value:function(t){this.state.lastCreatedPlaylistName==t?this.setState({playlistName:t,playlistButtonPrompt:"Update Playlist"}):this.setState({playlistName:t,playlistButtonPrompt:"Create Playlist"})}},{key:"getCurrentUserID",value:function(){var t=this;fetch("https://api.spotify.com/v1/me",{method:"get",headers:{Authorization:"Bearer "+v("access_token")},json:!0}).then((function(t){return t.json()})).then((function(e){t.setState({userID:e.id})}))}},{key:"createPlaylist",value:function(){var t=this;if(this.state.playlistName!=this.state.lastCreatedPlaylistName)this.setState({lastCreatedPlaylistName:this.state.playlistName,playlistButtonPrompt:"Update Playlist"}),fetch("https://api.spotify.com/v1/users/"+this.state.userID+"/playlists",{method:"post",headers:{Authorization:"Bearer "+v("access_token"),"Content-Type":"application/json"},body:JSON.stringify({name:this.state.playlistName,public:!1})}).then((function(t){return t.json()})).then((function(e){t.respondToNewPlaylistID(e.id)}));else{for(var e=[],a=0;a<this.state.playlistSongs.length;a++)e.push(this.state.playlistSongs[a].uri);fetch("https://api.spotify.com/v1/playlists/"+this.state.playlistID+"/tracks",{method:"put",headers:{Authorization:"Bearer "+v("access_token"),"Content-Type":"application/json"},body:JSON.stringify({uris:e})})}}},{key:"respondToNewPlaylistID",value:function(t){this.setState({playlistID:t}),this.addTracksToPlaylist(t)}},{key:"addTracksToPlaylist",value:function(t){for(var e=[],a=0;a<this.state.playlistSongs.length;a++)e.push(this.state.playlistSongs[a].uri);fetch("https://api.spotify.com/v1/playlists/"+t+"/tracks",{method:"post",headers:{Authorization:"Bearer "+v("access_token"),"Content-Type":"application/json"},body:JSON.stringify({uris:e})})}},{key:"searchAPI",value:function(t){var e=this;fetch("https://api.spotify.com/v1/search?q="+encodeURIComponent(t)+"&type=artist&limit=5",{method:"get",headers:{Authorization:"Bearer "+v("access_token")},json:!0}).then((function(t){return t.json()})).then((function(t){e.processArtistData(t,0)}))}},{key:"artistSimilarArtistsAPI",value:function(t){var e=this;fetch("https://api.spotify.com/v1/artists/"+encodeURIComponent(t)+"/related-artists?market=from_token",{method:"get",headers:{Authorization:"Bearer "+v("access_token")},json:!0}).then((function(t){return t.json()})).then((function(t){e.setState({mainArtistSimilarArtists:t.artists,spiderLeg:[{left:"55%",top:"6%",leftAnchor:"63%",topAnchor:"8%",artistName:t.artists[0]?t.artists[0].name:"",artistID:t.artists[0]?t.artists[0].id:""},{left:"30%",top:"5%",leftAnchor:"38%",topAnchor:"7%",artistName:t.artists[1]?t.artists[1].name:"",artistID:t.artists[1]?t.artists[1].id:""},{left:"60%",top:"12%",leftAnchor:"68%",topAnchor:"14%",artistName:t.artists[2]?t.artists[2].name:"",artistID:t.artists[2]?t.artists[2].id:""},{left:"70%",top:"30%",leftAnchor:"78%",topAnchor:"32%",artistName:t.artists[3]?t.artists[3].name:"",artistID:t.artists[3]?t.artists[3].id:""},{left:"81%",top:"40%",leftAnchor:"89%",topAnchor:"42%",artistName:t.artists[4]?t.artists[4].name:"",artistID:t.artists[4]?t.artists[4].id:""},{left:"27%",top:"30%",leftAnchor:"35%",topAnchor:"32%",artistName:t.artists[5]?t.artists[5].name:"",artistID:t.artists[5]?t.artists[5].id:""},{left:"40%",top:"20%",leftAnchor:"48%",topAnchor:"22%",artistName:t.artists[6]?t.artists[6].name:"",artistID:t.artists[6]?t.artists[6].id:""},{left:"50%",top:"30%",leftAnchor:"58%",topAnchor:"32%",artistName:t.artists[7]?t.artists[7].name:"",artistID:t.artists[7]?t.artists[7].id:""},{left:"78%",top:"8%",leftAnchor:"86%",topAnchor:"10%",artistName:t.artists[8]?t.artists[8].name:"",artistID:t.artists[8]?t.artists[8].id:""},{left:"29%",top:"60%",leftAnchor:"37%",topAnchor:"62%",artistName:t.artists[9]?t.artists[9].name:"",artistID:t.artists[9]?t.artists[9].id:""},{left:"82%",top:"68%",leftAnchor:"90%",topAnchor:"70%",artistName:t.artists[10]?t.artists[10].name:"",artistID:t.artists[10]?t.artists[10].id:""},{left:"26%",top:"90%",leftAnchor:"34%",topAnchor:"92%",artistName:t.artists[11]?t.artists[11].name:"",artistID:t.artists[11]?t.artists[11].id:""},{left:"80%",top:"76%",leftAnchor:"88%",topAnchor:"78%",artistName:t.artists[12]?t.artists[12].name:"",artistID:t.artists[12]?t.artists[12].id:""}]})}))}},{key:"setNewArtist",value:function(t,e){this.setState({currentMainArtist:e}),this.artistGetAllData(t)}},{key:"artistTopTracksAPI",value:function(t){var e=this;fetch("https://api.spotify.com/v1/artists/"+encodeURIComponent(t)+"/top-tracks?market=from_token",{method:"get",headers:{Authorization:"Bearer "+v("access_token")},json:!0}).then((function(t){return t.json()})).then((function(t){e.setState({mainArtistTracks:t.tracks})}))}},{key:"artistGetAllData",value:function(t){this.artistSimilarArtistsAPI(t),this.artistTopTracksAPI(t)}},{key:"processArtistData",value:function(t,e){this.setState({mainArtistSearchData:t.artists.items,currentMainArtist:t.artists.items[e].name}),this.artistGetAllData(t.artists.items[e].id)}},{key:"submitSong",value:function(t,e,a){var i=this.state.playlistSongs;i.push({artist:t,title:e,uri:a,id:this.state.playlistTrackIDGen}),this.setState({playlistSongs:i,playlistTrackIDGen:this.state.playlistTrackIDGen+1})}},{key:"tryNextArtist",value:function(){var t=this.state.currentSearchIndex;t++,this.setState({currentMainArtist:this.state.mainArtistSearchData[t].name,currentSearchIndex:t}),this.artistGetAllData(this.state.mainArtistSearchData[t].id)}},{key:"renderSpiderLeg",value:function(t){return h.a.createElement(f,{info:this.state.spiderLeg[t],setNewArtist:this.setNewArtist,spiderLegShow:this.state.spiderLegShow})}},{key:"removeTrackFromPlaylist",value:function(t){this.setState({playlistSongs:N(this.state.playlistSongs,"id",t)})}},{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(b,{playlistName:this.state.playlistName,playlistNameChange:this.playlistNameChange,playlistSongs:this.state.playlistSongs,createPlaylist:this.createPlaylist,playlistButtonPrompt:this.state.playlistButtonPrompt,removeTrackFromPlaylist:this.removeTrackFromPlaylist}),h.a.createElement("div",null,this.renderSpiderLeg(0),this.renderSpiderLeg(1),this.renderSpiderLeg(2),this.renderSpiderLeg(3),this.renderSpiderLeg(4),this.renderSpiderLeg(5),this.renderSpiderLeg(6),this.renderSpiderLeg(7),this.renderSpiderLeg(8),this.renderSpiderLeg(9),this.renderSpiderLeg(10),this.renderSpiderLeg(11),this.renderSpiderLeg(12)),h.a.createElement(y,{currentMainArtist:this.state.currentMainArtist,mainArtistTracks:this.state.mainArtistTracks,mainArtistChange:this.mainArtistChange,mainArtistSubmit:this.mainArtistSubmit,currentSearch:this.state.currentMainArtist,spiderLegShow:this.state.spiderLegShow,submitSong:this.submitSong,playlistSongs:this.state.playlistSongs,tryNextArtist:this.tryNextArtist}))}}]),e}(h.a.Component),f=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).handleClick=a.handleClick.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(t){this.props.setNewArtist(this.props.info.artistID,this.props.info.artistName)}},{key:"render",value:function(){return h.a.createElement("div",{className:this.props.spiderLegShow?"":"hidden"},h.a.createElement("button",{onClick:this.handleClick,className:"otherArtistButton",artistid:this.props.info.artistID,style:{left:this.props.info.left,top:this.props.info.top}},this.props.info.artistName),h.a.createElement("svg",{className:"spiderLegConnector"},h.a.createElement("line",{x1:this.props.info.leftAnchor,x2:"60%",y1:this.props.info.topAnchor,y2:"46%"})))}}]),e}(h.a.Component),y=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).handleSubmit=a.handleSubmit.bind(Object(i.a)(a)),a.handleChange=a.handleChange.bind(Object(i.a)(a)),a.handleWrongArtist=a.handleWrongArtist.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.mainArtistSubmit(this.props.currentMainArtist)}},{key:"handleChange",value:function(t){this.props.mainArtistChange(t.target.value)}},{key:"handleWrongArtist",value:function(t){this.props.tryNextArtist()}},{key:"render",value:function(){return h.a.createElement("div",{id:"mainArtist"},h.a.createElement("form",{onSubmit:this.handleSubmit},h.a.createElement("input",{id:"mainArtistInput",value:this.props.currentMainArtist,type:"text",onChange:this.handleChange,placeholder:"Enter Artist Here"}),h.a.createElement("div",{id:"mainArtistTracks",className:this.props.spiderLegShow?"":"hidden"},h.a.createElement(A,{mainArtistTracks:this.props.mainArtistTracks,submitSong:this.props.submitSong,artist:this.props.currentMainArtist,playlistSongs:this.props.playlistSongs}))),h.a.createElement("button",{className:"mainArtistButton",onClick:this.handleSubmit},"Search"),h.a.createElement("button",{className:"mainArtistButton",onClick:this.handleWrongArtist},"Wrong Artist"))}}]),e}(h.a.Component),A=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).handleClick=a.handleClick.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(t,e,a){this.props.submitSong(t,e,a)}},{key:"render",value:function(){var t=this;return h.a.createElement("div",null,h.a.createElement("table",{id:"mainArtistTrackTable"},h.a.createElement("colgroup",null,h.a.createElement("col",{className:"mainArtistSongTitleColumn"}),h.a.createElement("col",{className:"mainArtistButtonColumn"})),h.a.createElement("tbody",null,this.props.mainArtistTracks.map((function(e){return h.a.createElement("tr",{onClick:function(){return t.handleClick(t.props.artist,e.name,e.uri)},artist:t.props.artist,uri:e.uri,key:e.id,className:"mainArtistTrackTableRow"},h.a.createElement("td",{className:"mainArtistTrackTableCellName"},e.name),h.a.createElement("td",{className:"mainArtistPlusColumn"},"+"))})))))}}]),e}(h.a.Component),b=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).handleSubmit=a.handleSubmit.bind(Object(i.a)(a)),a.handleChange=a.handleChange.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.createPlaylist()}},{key:"handleChange",value:function(t){this.props.playlistNameChange(t.target.value)}},{key:"render",value:function(){return h.a.createElement("div",{id:"playListArea"},h.a.createElement("form",null,h.a.createElement("input",{id:"playlistNameInput",value:this.props.playlistName,type:"text",onChange:this.handleChange,placeholder:"Enter Playlist Name Here"}),h.a.createElement(g,{playlistSongs:this.props.playlistSongs,removeTrackFromPlaylist:this.props.removeTrackFromPlaylist})),h.a.createElement("button",{onClick:this.handleSubmit,id:"playlistSubmit"},this.props.playlistButtonPrompt))}}]),e}(h.a.Component),g=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(n.a)(this,Object(l.a)(e).call(this,t))).handleClick=a.handleClick.bind(Object(i.a)(a)),a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"handleClick",value:function(t){this.props.removeTrackFromPlaylist(t)}},{key:"render",value:function(){var t=this;return h.a.createElement("div",null,h.a.createElement("table",{id:"playlistTrackTable"},h.a.createElement("colgroup",null,h.a.createElement("col",{className:"playlistSongTitleColumn"}),h.a.createElement("col",{className:"playlistMinusColumn"})),h.a.createElement("tbody",null,this.props.playlistSongs.map((function(e){return h.a.createElement("tr",{onClick:function(){return t.handleClick(e.id)},artist:e.artist,uri:e.uri,className:"playlistTrackTableRow"},h.a.createElement("td",{className:"playlistSongTitleColumn"},e.artist+": "+e.title),h.a.createElement("td",{className:"playlistMinusColumn"},"-"))})))))}}]),e}(h.a.Component),k="spotify_auth_state",S=function(t){function e(){var t,a;Object(s.a)(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(a=Object(n.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).handleClick=function(){var t=function(t){var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(;e.length<=t;)e+=a.charAt(Math.floor(Math.random()*a.length));return e}(16);localStorage.setItem(k,t);var e="https://accounts.spotify.com/authorize?response_type=token&client_id=".concat(encodeURIComponent("8f8783f95ca7449fbb4bb5ac6f84840b"),"&redirect_uri=").concat(encodeURIComponent("https://levelupjordan.github.io/fourth-try/"),"&state=").concat(encodeURIComponent(t),"&scope=").concat(encodeURIComponent("playlist-modify-private"));window.location=e},a}return Object(o.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){localStorage.removeItem(k)}},{key:"render",value:function(){return h.a.createElement("button",{onClick:this.handleClick},"Log in")}}]),e}(h.a.Component);function v(t){return window.location.hash.substr(1).split("&").reduce((function(t,e){var a=e.split("=");return t[a[0]]=a[1],t}),{})[t]}function N(t,e,a){for(var i=0;i<t.length;i++)if(t[i][e]==a)return t.splice(i,1),t}u.a.render(h.a.createElement(m,null),document.getElementById("root"))},15:function(t,e,a){},9:function(t,e,a){t.exports=a(10)}},[[9,1,2]]]);
//# sourceMappingURL=main.d1e5f87c.chunk.js.map